!function(){"use strict";function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.Tracks=window.tracks=function(){var I=[],a=[],n={attributes:!1,childList:!0,subtree:!0},k=Object.assign({display:null,visibility:null,opacity:null,delay:null,margin:null,padding:null,background:null,color:null,border:null,height:null,width:null,maxHeight:null,maxWidth:null,overflow:null,"font-size":null,"border-radius":null,"background-color":null,"border-width":null,"border-color":null,"pointer-events":null},{x:function(e){return t("translateX",e,"px")},y:function(e){return t("translateY",e,"px")},skewX:function(e){return t("skewX",e)},skewY:function(e){return t("skewY",e)},scaleX:function(e){return t("scaleX",e)},scaleY:function(e){return t("scaleY",e)},rotation:function(e){return t("rotate",e,"deg")},scale:function(e){return t("scale",e)}});function t(e,n,t){return e+"("+n+(t=t||"")+")"}var z=["width","height","margin","padding"],x={easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",easeInCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",easeOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeInQuart:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",easeInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",easeInExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInOutExpo:"cubic-bezier(1, 0, 0, 1)",easeInCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",easeInBack:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",easeInOutBack:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},S=["webkitTransform","MozTransform","msTransform","OTransform","transform"],e=["-webkit-transition","-moz-transition","-o-transition","transition"],N={UNDEFINED:"undefined",STRING:"string",NUMBER:"number",OBJECT:"object",DELAY:"delay",EASE:"ease",FUNCTION:"function",DEFAULT_EASE:"linear",DEFAULT_TWEEN_PROP:"all",DEFAULT_TIME_UNIT:"ms",CHILDLIST:"childList"},C=window.TracksConfig,A=N.DEFAULT_EASE;function L(n,t,i){e.forEach(function(e){n.style.cssText+=e+": "+N.DEFAULT_TWEEN_PROP+" "+t+N.DEFAULT_TIME_UNIT+" "+i})}function P(n,t){n.style[t.key]=t.value,t.handler?S.forEach(function(e){n.style.cssText+=e+": "+t.handler(t.value)+";"}):n.style.cssText+=t.key+":"+t.value+";"}function s(i,e){return Array.from(e).find(function(e){return-1<(n=e,t="",n.classList&&(t+=JSON.stringify(n.classList)),n.id&&(t+=n.id),t).indexOf(i);var n,t})}function c(e){e.remove=Element.prototype.remove}function l(e){a.splice(e,1)}function f(o,r,u){o&&(o.onclick=null,o.remove=function(){var e,n,t,i;n=u,t=r(e=o),i=a.indexOf(function(e){return e.identifier===n}),D(t)===N.OBJECT&&(t.then&&D(t.then)===N.FUNCTION?t.then(function(){F()&&console.log("Tracks - internal - on complete done"),c(e),l(i),e.remove()}):t.animation&&t.animation.then(function(){c(e),l(i),e.remove(),t.onComplete&&t.onComplete()}))})}function U(e){return window.TracksConfig&&window.TracksConfig[e]}function F(){return!0===U("logs")}function i(v,O,h,y,g){return new Promise(function(e,n){if(y=y||1,g=g||!1,v&&D(O)===N.OBJECT&&D(h)===N.OBJECT||n("incorrect args"),("undefined"==typeof window?"undefined":D(window))===N.UNDEFINED&&n("no window"),0===Object.values(O).length&&n("incorrect fromProps args"),0===Object.values(h).length&&n("incorrect toProps args"),D(y)===N.NUMBER&&y||n("incorrect duration arg"),(C=window.TracksConfig)&&void 0!==U("ease")){var t=C.ease;A=x[t]?x[t]:N.DEFAULT_EASE}var i={element:v,fromState:O,toState:h,duration:y};F()&&console.table(i),-1===v.style.cssText.indexOf("width")&&(v.style.cssText+="width: 0px"),-1===v.style.cssText.indexOf("height")&&(v.style.cssText+="height: 0px");var o,r,u,a,c=(o=O,r=h,u=Object.prototype.hasOwnProperty,(a=[{p:o,equation:A},{p:r,equation:A}]).forEach(function(e){u.call(e.p,N.EASE)&&u.call(x,e.p.ease)&&(e.equation=x[e.p.ease])}),{easingEquationFrom:a[0].equation,easingEquationTo:a[1].equation}),s=c.easingEquationFrom,l=c.easingEquationTo,f=0,d=Object.prototype.hasOwnProperty,b=[],m=[];Object.entries(O).forEach(function(e){var n=e[0],t=e[1];n===N.EASE&&D(t)===N.STRING||(d.call(k,n)?b.push({key:n,value:t,handler:k[n]}):console.error("Tracks - invalid from key:",n))}),Object.entries(h).forEach(function(e){var n=e[0],t=e[1];D(t)!==N.STRING&&-1===t.toString().indexOf("px")&&(z.some(function(e){return-1<e.indexOf(n.toLowerCase())})&&(t+="px"));if(n!==N.EASE||D(t)!==N.STRING)if(n===N.DELAY&&D(t)===N.NUMBER)f=t;else if(D(t)===N.NUMBER||D(t)===N.STRING){if(!d.call(k,n))return void console.error("Tracks - invalid to key:",n);var i={key:n,value:t,handler:k[n]};m.push(i)}});var E={from:b,to:m},p=1e3*y,T=1e3*f;L(v,p,s),E.from.forEach(function(e){P(v,e)}),(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)(function(){setTimeout(function(){L(v,p,l),E.to.forEach(function(e){P(v,e)}),setTimeout(function(){var n;(n=v).style.cssText+='transition: "";',S.forEach(function(e){n.style.cssText+=e+": "}),e()},p)},T)}.bind(window));var w={el:v,fromProps:O,toProps:h,duration:y};I.includes(w)||g||(I.push(w),document.dispatchEvent(new CustomEvent("tracksListPush",{detail:{list:I}})))})}return{fromTo:i,on:function(t,i,o){if(o=o||null,null==(i=i||null)&&null==o)return console.error("Tracks - Both onAdded / onRemoved arguments cannot be null");if(!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver))return console.error("Tracks - MutationObserver needs to be polyfilled");if(!window.navigator.userAgent.match(/(MSIE|Trident)/)){if(null!=i&&D(i)!==N.FUNCTION)return console.error("Tracks - onAdded argument is not a function");var e=new MutationObserver(function(e,n){!function(e,n,t,i,o){i=i||null,o=o||null;for(var r=t.replace(/[.,#]/g,""),u=0;u<e.length;u++){var a=e[u];if(a.type===N.CHILDLIST&&a.addedNodes){var c=s(r,a.addedNodes);null!=o&&f(c,o,t),c&&null!=i&&i(c)}}}(e,0,t,i,o)});-1===JSON.stringify(a).indexOf(t)&&a.push({identifier:t,mObserver:e}),e.observe(document.body,n)}},reverse:function(){if(0!==I.length){var e=I[I.length-1],n=!!e.toProps.rotation&&-e.toProps.rotation,t=e.fromProps;n&&(t=Object.assign(e.fromProps,{rotation:n})),i(e.el,e.toProps,t,e.duration,!0),I.pop(),document.dispatchEvent(new CustomEvent("tracksListPop",{detail:{list:I}}))}},getList:function(){return I}}}()}();
