!function(){"use strict";function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.Tracks=window.tracks=function(){var I=[],a=[],n={attributes:!1,childList:!0,subtree:!0},k=Object.assign({display:null,visibility:null,opacity:null,delay:null,margin:null,padding:null,background:null,color:null,border:null,height:null,width:null,maxHeight:null,maxWidth:null,overflow:null,"font-size":null,"border-radius":null,"background-color":null,"border-width":null,"border-color":null,"pointer-events":null},{x:function(e){return t("translateX",e,"px")},y:function(e){return t("translateY",e,"px")},skewX:function(e){return t("skewX",e)},skewY:function(e){return t("skewY",e)},scaleX:function(e){return t("scaleX",e)},scaleY:function(e){return t("scaleY",e)},rotation:function(e){return t("rotate",e,"deg")},scale:function(e){return t("scale",e)}});function t(e,n,t){return e+"("+n+(t=t||"")+")"}var z=["width","height","margin","padding"],N={easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",easeInCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",easeOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeInQuart:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",easeInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",easeInExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInOutExpo:"cubic-bezier(1, 0, 0, 1)",easeInCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",easeInBack:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",easeInOutBack:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},S=["webkitTransform","MozTransform","msTransform","OTransform","transform"],e=["-webkit-transition","-moz-transition","-o-transition","transition"],C={UNDEFINED:"undefined",STRING:"string",NUMBER:"number",OBJECT:"object",DELAY:"delay",EASE:"ease",FUNCTION:"function",DEFAULT_EASE:"linear",DEFAULT_TWEEN_PROP:"all",DEFAULT_TIME_UNIT:"ms",CHILDLIST:"childList"},x=window.TracksConfig,L=C.DEFAULT_EASE;function A(n,t,i){e.forEach(function(e){n.style[e]=C.DEFAULT_TWEEN_PROP+" "+t+C.DEFAULT_TIME_UNIT+" "+i})}function P(n,t){n.style[t.key]=t.value,t.handler?S.forEach(function(e){n.style[e]=t.handler(t.value)}):n.style[t.key]=t.value}function s(i,e){return Array.from(e).find(function(e){return-1<(n=e,t="",n.classList&&(t+=JSON.stringify(n.classList)),n.id&&(t+=n.id),t).indexOf(i);var n,t})}function c(e){e.remove=Element.prototype.remove}function l(e){a.splice(e,1)}function f(r,o,u){r&&(r.onclick=null,r.remove=function(){var e,n,t,i;n=u,t=o(e=r),i=a.indexOf(function(e){return e.identifier===n}),F(t)===C.OBJECT&&(t.then&&F(t.then)===C.FUNCTION?t.then(function(){D()&&console.log("Tracks - internal - on complete done"),c(e),l(i),e.remove()}):t.animation&&t.animation.then(function(){c(e),l(i),e.remove(),t.onComplete&&t.onComplete()}))})}function U(e){return window.TracksConfig&&window.TracksConfig[e]}function D(){return!0===U("logs")}function i(T,h,y,w,g){return new Promise(function(e,n){if(w=w||1,g=g||!1,T&&F(h)===C.OBJECT&&F(y)===C.OBJECT||n("incorrect args"),("undefined"==typeof window?"undefined":F(window))===C.UNDEFINED&&n("no window"),0===Object.values(h).length&&n("incorrect fromProps args"),0===Object.values(y).length&&n("incorrect toProps args"),F(w)===C.NUMBER&&w||n("incorrect duration arg"),(x=window.TracksConfig)&&void 0!==U("ease")){var t=x.ease;L=N[t]?N[t]:C.DEFAULT_EASE}var i={element:T,fromState:h,toState:y,duration:w};D()&&console.table(i),-1===T.style.cssText.indexOf("width")&&(T.style.width="0px"),-1===T.style.cssText.indexOf("height")&&(T.style.height="0px");var r,o,u,a,c=(r=h,o=y,u=Object.prototype.hasOwnProperty,(a=[{p:r,equation:L},{p:o,equation:L}]).forEach(function(e){u.call(e.p,C.EASE)&&u.call(N,e.p.ease)&&(e.equation=N[e.p.ease])}),{easingEquationFrom:a[0].equation,easingEquationTo:a[1].equation}),s=c.easingEquationFrom,l=c.easingEquationTo,f=0,d=Object.prototype.hasOwnProperty,b=[],E=[];Object.entries(h).forEach(function(e){var n=e[0],t=e[1];n===C.EASE&&F(t)===C.STRING||(d.call(k,n)?b.push({key:n,value:t,handler:k[n]}):console.error("Tracks - invalid from key:",n))}),Object.entries(y).forEach(function(e){var n=e[0],t=e[1];F(t)!==C.STRING&&-1===t.toString().indexOf("px")&&(z.some(function(e){return-1<e.indexOf(n.toLowerCase())})&&(t+="px"));if(n!==C.EASE||F(t)!==C.STRING)if(n===C.DELAY&&F(t)===C.NUMBER)f=t;else if(F(t)===C.NUMBER||F(t)===C.STRING){if(!d.call(k,n))return void console.error("Tracks - invalid to key:",n);var i={key:n,value:t,handler:k[n]};E.push(i)}});var p={from:b,to:E},m=1e3*w,O=1e3*f;A(T,m,s),p.from.forEach(function(e){P(T,e)}),window.requestAnimationFrame(function(){setTimeout(function(){A(T,m,l),p.to.forEach(function(e){P(T,e)}),setTimeout(function(){var n;(n=T).style.transition="",S.forEach(function(e){n.style[e]=""}),e()},m)},O)});var v={el:T,fromProps:h,toProps:y,duration:w};I.includes(v)||g||(I.push(v),document.dispatchEvent(new CustomEvent("tracksListPush",{detail:{list:I}})))})}return{fromTo:i,on:function(t,i,r){if(r=r||null,null==(i=i||null)&&null==r)return console.error("Tracks - Both onAdded / onRemoved arguments cannot be null");if(!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver))return console.error("Tracks - MutationObserver needs to be polyfilled");if(null!=i&&F(i)!==C.FUNCTION)return console.error("Tracks - onAdded argument is not a function");var e=new MutationObserver(function(e,n){!function(e,n,t,i,r){i=i||null,r=r||null;for(var o=t.replace(/[.,#]/g,""),u=0;u<e.length;u++){var a=e[u];if(a.type===C.CHILDLIST&&a.addedNodes){var c=s(o,a.addedNodes);null!=r&&f(c,r,t),c&&null!=i&&i(c)}}}(e,0,t,i,r)});-1===JSON.stringify(a).indexOf(t)&&a.push({identifier:t,mObserver:e}),e.observe(document.body,n)},reverse:function(){if(0!==I.length){var e=I[I.length-1],n=!!e.toProps.rotation&&-e.toProps.rotation,t=e.fromProps;n&&(t=Object.assign(e.fromProps,{rotation:n})),i(e.el,e.toProps,t,e.duration,!0),I.pop(),document.dispatchEvent(new CustomEvent("tracksListPop",{detail:{list:I}}))}},getList:function(){return I}}}()}();
