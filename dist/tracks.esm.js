function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.Tracks=window.tracks=function(){var I=[],a=[],n={attributes:!1,childList:!0,subtree:!0},k=Object.assign({display:null,visibility:null,opacity:null,delay:null,margin:null,padding:null,background:null,color:null,border:null,height:null,width:null,maxHeight:null,maxWidth:null,overflow:null,"font-size":null,"border-radius":null,"background-color":null,"border-width":null,"border-color":null,"pointer-events":null},{x:function(e){return t("translateX",e,"px")},y:function(e){return t("translateY",e,"px")},skewX:function(e){return t("skewX",e)},skewY:function(e){return t("skewY",e)},scaleX:function(e){return t("scaleX",e)},scaleY:function(e){return t("scaleY",e)},rotation:function(e){return t("rotate",e,"deg")},scale:function(e){return t("scale",e)}});function t(e,n,t){return e+"("+n+(t=t||"")+")"}var z=["width","height","margin","padding"],x={easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",easeInCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",easeOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeInQuart:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",easeInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",easeInExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInOutExpo:"cubic-bezier(1, 0, 0, 1)",easeInCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",easeInBack:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",easeInOutBack:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},S=["webkitTransform","MozTransform","msTransform","OTransform","transform"],e=["-webkit-transition","-moz-transition","-o-transition","transition"],N={UNDEFINED:"undefined",STRING:"string",NUMBER:"number",OBJECT:"object",DELAY:"delay",EASE:"ease",FUNCTION:"function",DEFAULT_EASE:"linear",DEFAULT_TWEEN_PROP:"all",DEFAULT_TIME_UNIT:"ms",CHILDLIST:"childList"},_=window.TracksConfig,C=N.DEFAULT_EASE;function A(n,t,o){e.forEach(function(e){n.style.cssText+=e+": "+N.DEFAULT_TWEEN_PROP+" "+t+N.DEFAULT_TIME_UNIT+" "+o})}function L(n,t){n.style[t.key]=t.value,t.handler?S.forEach(function(e){n.style.cssText+=e+": "+t.handler(t.value)+";"}):n.style.cssText+=t.key+":"+t.value+";"}function s(o,e){return Array.from(e).find(function(e){return-1<(n=e,t="",n.classList&&(t+=JSON.stringify(n.classList)),n.id&&(t+=n.id),t).indexOf(o);var n,t})}function c(e){e.remove=Element.prototype.remove}function l(e){a.splice(e,1)}function f(i,r,u){i&&(i.onclick=null,i.remove=function(){var e,n,t,o;n=u,t=r(e=i),o=a.indexOf(function(e){return e.identifier===n}),_typeof(t)===N.OBJECT&&(t.then&&_typeof(t.then)===N.FUNCTION?t.then(function(){U()&&console.log("Tracks - internal - on complete done"),c(e),l(o),e.remove()}):t.animation&&t.animation.then(function(){c(e),l(o),e.remove(),t.onComplete&&t.onComplete()}))})}function P(e){return window.TracksConfig&&window.TracksConfig[e]}function U(){return!0===P("logs")}function o(w,v,O,h,g){return new Promise(function(e,n){if(h=h||1,g=g||!1,w&&_typeof(v)===N.OBJECT&&_typeof(O)===N.OBJECT||n("incorrect args"),("undefined"==typeof window?"undefined":_typeof(window))===N.UNDEFINED&&n("no window"),0===Object.values(v).length&&n("incorrect fromProps args"),0===Object.values(O).length&&n("incorrect toProps args"),_typeof(h)===N.NUMBER&&h||n("incorrect duration arg"),(_=window.TracksConfig)&&void 0!==P("ease")){var t=_.ease;C=x[t]?x[t]:N.DEFAULT_EASE}var o={element:w,fromState:v,toState:O,duration:h};U()&&console.table(o),-1===w.style.cssText.indexOf("width")&&(w.style.cssText+="width: 0px"),-1===w.style.cssText.indexOf("height")&&(w.style.cssText+="height: 0px");var i,r,u,a,c=(i=v,r=O,u=Object.prototype.hasOwnProperty,(a=[{p:i,equation:C},{p:r,equation:C}]).forEach(function(e){u.call(e.p,N.EASE)&&u.call(x,e.p.ease)&&(e.equation=x[e.p.ease])}),{easingEquationFrom:a[0].equation,easingEquationTo:a[1].equation}),s=c.easingEquationFrom,l=c.easingEquationTo,f=0,d=Object.prototype.hasOwnProperty,b=[],p=[];Object.entries(v).forEach(function(e){var n=e[0],t=e[1];n===N.EASE&&_typeof(t)===N.STRING||(d.call(k,n)?b.push({key:n,value:t,handler:k[n]}):console.error("Tracks - invalid from key:",n))}),Object.entries(O).forEach(function(e){var n=e[0],t=e[1];_typeof(t)!==N.STRING&&-1===t.toString().indexOf("px")&&(z.some(function(e){return-1<e.indexOf(n.toLowerCase())})&&(t+="px"));if(n!==N.EASE||_typeof(t)!==N.STRING)if(n===N.DELAY&&_typeof(t)===N.NUMBER)f=t;else if(_typeof(t)===N.NUMBER||_typeof(t)===N.STRING){if(!d.call(k,n))return void console.error("Tracks - invalid to key:",n);var o={key:n,value:t,handler:k[n]};p.push(o)}});var m={from:b,to:p},y=1e3*h,E=1e3*f;A(w,y,s),m.from.forEach(function(e){L(w,e)}),(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)(function(){setTimeout(function(){A(w,y,l),m.to.forEach(function(e){L(w,e)}),setTimeout(function(){var n;(n=w).style.cssText+='transition: "";',S.forEach(function(e){n.style.cssText+=e+": "}),e()},y)},E)}.bind(window));var T={el:w,fromProps:v,toProps:O,duration:h};I.includes(T)||g||(I.push(T),document.dispatchEvent(new CustomEvent("tracksListPush",{detail:{list:I}})))})}return{fromTo:o,on:function(t,o,i){if(i=i||null,null==(o=o||null)&&null==i)return console.error("Tracks - Both onAdded / onRemoved arguments cannot be null");if(!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver))return console.error("Tracks - MutationObserver needs to be polyfilled");if(!window.navigator.userAgent.match(/(MSIE|Trident)/)){if(null!=o&&_typeof(o)!==N.FUNCTION)return console.error("Tracks - onAdded argument is not a function");var e=new MutationObserver(function(e,n){!function(e,n,t,o,i){o=o||null,i=i||null;for(var r=t.replace(/[.,#]/g,""),u=0;u<e.length;u++){var a=e[u];if(a.type===N.CHILDLIST&&a.addedNodes){var c=s(r,a.addedNodes);null!=i&&f(c,i,t),c&&null!=o&&o(c)}}}(e,0,t,o,i)});-1===JSON.stringify(a).indexOf(t)&&a.push({identifier:t,mObserver:e}),e.observe(document.body,n)}},reverse:function(){if(0!==I.length){var e=I[I.length-1],n=!!e.toProps.rotation&&-e.toProps.rotation,t=e.fromProps;n&&(t=Object.assign(e.fromProps,{rotation:n})),o(e.el,e.toProps,t,e.duration,!0),I.pop(),document.dispatchEvent(new CustomEvent("tracksListPop",{detail:{list:I}}))}},getList:function(){return I}}}();
