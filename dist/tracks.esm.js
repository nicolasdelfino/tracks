function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.Tracks=window.tracks=function(){var I=[],a=[],n={attributes:!1,childList:!0,subtree:!0},k=Object.assign({display:null,visibility:null,opacity:null,delay:null,margin:null,padding:null,background:null,color:null,border:null,height:null,width:null,maxHeight:null,maxWidth:null,overflow:null,"font-size":null,"border-radius":null,"background-color":null,"border-width":null,"border-color":null,"pointer-events":null},{x:function(e){return t("translateX",e,"px")},y:function(e){return t("translateY",e,"px")},skewX:function(e){return t("skewX",e)},skewY:function(e){return t("skewY",e)},scaleX:function(e){return t("scaleX",e)},scaleY:function(e){return t("scaleY",e)},rotation:function(e){return t("rotate",e,"deg")},scale:function(e){return t("scale",e)}});function t(e,n,t){return e+"("+n+(t=t||"")+")"}var z=["width","height","margin","padding"],N={easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",easeInCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",easeOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeInQuart:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",easeInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",easeInExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInOutExpo:"cubic-bezier(1, 0, 0, 1)",easeInCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",easeInBack:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",easeInOutBack:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},S=["webkitTransform","MozTransform","msTransform","OTransform","transform"],e=["-webkit-transition","-moz-transition","-o-transition","transition"],_={UNDEFINED:"undefined",STRING:"string",NUMBER:"number",OBJECT:"object",DELAY:"delay",EASE:"ease",FUNCTION:"function",DEFAULT_EASE:"linear",DEFAULT_TWEEN_PROP:"all",DEFAULT_TIME_UNIT:"ms",CHILDLIST:"childList"},C=window.TracksConfig,x=_.DEFAULT_EASE;function L(n,t,o){e.forEach(function(e){n.style[e]=_.DEFAULT_TWEEN_PROP+" "+t+_.DEFAULT_TIME_UNIT+" "+o})}function A(n,t){n.style[t.key]=t.value,t.handler?S.forEach(function(e){n.style[e]=t.handler(t.value)}):n.style[t.key]=t.value}function s(o,e){return Array.from(e).find(function(e){return-1<(n=e,t="",n.classList&&(t+=JSON.stringify(n.classList)),n.id&&(t+=n.id),t).indexOf(o);var n,t})}function c(e){e.remove=Element.prototype.remove}function l(e){a.splice(e,1)}function f(i,r,u){i&&(i.onclick=null,i.remove=function(){var e,n,t,o;n=u,t=r(e=i),o=a.indexOf(function(e){return e.identifier===n}),_typeof(t)===_.OBJECT&&(t.then&&_typeof(t.then)===_.FUNCTION?t.then(function(){U()&&console.log("Tracks - internal - on complete done"),c(e),l(o),e.remove()}):t.animation&&t.animation.then(function(){c(e),l(o),e.remove(),t.onComplete&&t.onComplete()}))})}function P(e){return window.TracksConfig&&window.TracksConfig[e]}function U(){return!0===P("logs")}function o(h,O,T){var g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,w=4<arguments.length&&void 0!==arguments[4]&&arguments[4];return new Promise(function(e,n){if(h&&_typeof(O)===_.OBJECT&&_typeof(T)===_.OBJECT||n("incorrect args"),("undefined"==typeof window?"undefined":_typeof(window))===_.UNDEFINED&&n("no window"),0===Object.values(O).length&&n("incorrect fromProps args"),0===Object.values(T).length&&n("incorrect toProps args"),_typeof(g)===_.NUMBER&&g||n("incorrect duration arg"),(C=window.TracksConfig)&&void 0!==P("ease")){var t=C.ease;x=N[t]?N[t]:_.DEFAULT_EASE}var o={element:h,fromState:O,toState:T,duration:g};U()&&console.table(o),-1===h.style.cssText.indexOf("width")&&(h.style.width="0px"),-1===h.style.cssText.indexOf("height")&&(h.style.height="0px");var i,r,u,a,c=(i=O,r=T,u=Object.prototype.hasOwnProperty,(a=[{p:i,equation:x},{p:r,equation:x}]).forEach(function(e){u.call(e.p,_.EASE)&&u.call(N,e.p.ease)&&(e.equation=N[e.p.ease])}),{easingEquationFrom:a[0].equation,easingEquationTo:a[1].equation}),s=c.easingEquationFrom,l=c.easingEquationTo,f=0,d=Object.prototype.hasOwnProperty,b=[],p=[];Object.entries(O).forEach(function(e){var n=e[0],t=e[1];n===_.EASE&&_typeof(t)===_.STRING||(d.call(k,n)?b.push({key:n,value:t,handler:k[n]}):console.error("Tracks - invalid from key:",n))}),Object.entries(T).forEach(function(e){var n=e[0],t=e[1];_typeof(t)!==_.STRING&&-1===t.toString().indexOf("px")&&(z.some(function(e){return-1<e.indexOf(n.toLowerCase())})&&(t+="px"));if(n!==_.EASE||_typeof(t)!==_.STRING)if(n===_.DELAY&&_typeof(t)===_.NUMBER)f=t;else if(_typeof(t)===_.NUMBER||_typeof(t)===_.STRING){if(!d.call(k,n))return void console.error("Tracks - invalid to key:",n);var o={key:n,value:t,handler:k[n]};p.push(o)}});var y={from:b,to:p},E=1e3*g,m=1e3*f;L(h,E,s),y.from.forEach(function(e){A(h,e)}),window.requestAnimationFrame(function(){setTimeout(function(){L(h,E,l),y.to.forEach(function(e){A(h,e)}),setTimeout(function(){var n;(n=h).style.transition="",S.forEach(function(e){n.style[e]=""}),e()},E)},m)});var v={el:h,fromProps:O,toProps:T,duration:g};I.includes(v)||w||(I.push(v),document.dispatchEvent(new CustomEvent("tracksListPush",{detail:{list:I}})))})}return{fromTo:o,on:function(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(null==o&&null==i)return console.error("Tracks - Both onAdded / onRemoved arguments cannot be null");if(!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver))return console.error("Tracks - MutationObserver needs to be polyfilled");if(null!=o&&_typeof(o)!==_.FUNCTION)return console.error("Tracks - onAdded argument is not a function");var e=new MutationObserver(function(e,n){!function(e,n,t,o,i){o=o||null,i=i||null;for(var r=t.replace(/[.,#]/g,""),u=0;u<e.length;u++){var a=e[u];if(a.type===_.CHILDLIST&&a.addedNodes){var c=s(r,a.addedNodes);null!=i&&f(c,i,t),c&&null!=o&&o(c)}}}(e,0,t,o,i)});-1===JSON.stringify(a).indexOf(t)&&a.push({identifier:t,mObserver:e}),e.observe(document.body,n)},reverse:function(){if(0!==I.length){var e=I[I.length-1],n=!!e.toProps.rotation&&-e.toProps.rotation,t=e.fromProps;n&&(t=Object.assign(e.fromProps,{rotation:n})),o(e.el,e.toProps,t,e.duration,!0),I.pop(),document.dispatchEvent(new CustomEvent("tracksListPop",{detail:{list:I}}))}},getList:function(){return I}}}();
